<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="width=device-width,width=320,user-scalable=no"/>
    <link rel="stylesheet" href="./css/bootstrap.css"/>
    <link rel="stylesheet" href="./css/cart_style.css"/>
</head>
<body>
<div class="block">
    <div class="title">
        <p>购物车</p>
    </div>
    <div class="list">
        <div class="dianpu">
            <input class="ck" type="checkbox"/>
            <a href=""><span>卡饰社官方旗舰店</span></a>
        </div>
    <div class="shangpin row">
        <div class="col-xs-1"><input class="ckbox" type="checkbox"/></div>
        <div class="col-xs-4 imageblock"><img src="./image/cart/s1.jpg" alt=""/></div>
        <div class="col-xs-7 textright">
            <span class="txt">2017夏季新款韩版蕾丝拼接</span><br/><p class="txt">荷叶袖露肩雪纺娃娃衫上衣女短袖雪</p>
            <p class="style small text-right">颜色:标配版</p><span></span>
            <div style="margin-top: 10px">
                <span class="price">￥80元</span>
                <div class="jj pull-right clearfix">
                    <span class="jian pull-left">-</span>
                    <input class="num pull-left" type="text" value="1"/>
                    <span class="jia pull-left">+</span><br/>
                    <span class="youhuo">有货</span>
                </div>
            </div>
        </div>
    </div>
</div>
    <div class="list">
        <div class="dianpu">
            <input class="ck" type="checkbox"/>
            <a href=""><span>卡饰社官方旗舰店</span></a>
        </div>
        <div class="shangpin row">
            <div class="col-xs-1"><input class="ckbox" type="checkbox"/></div>
            <div class="col-xs-4 imageblock"><img src="./image/cart/s1.jpg" alt=""/></div>
            <div class="col-xs-7 textright">
                <span class="txt">2017夏季新款韩版蕾丝拼接</span><br/><p class="txt">荷叶袖露肩雪纺娃娃衫上衣女短袖雪</p>
                <p class="style small text-right">颜色:标配版</p><span></span>
                <div style="margin-top: 10px">
                    <span class="price">￥101元</span>
                    <div class="jj pull-right clearfix">
                        <span class="jian pull-left">-</span>
                        <input class="num pull-left" type="text" value="1"/>
                        <span class="jia pull-left">+</span><br/>
                        <span class="youhuo">有货</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="list">
        <div class="dianpu">
            <input class="ck" type="checkbox"/>
            <a href=""><span>卡饰社官方旗舰店</span></a>
        </div>
        <div class="shangpin row">
            <div class="col-xs-1"><input class="ckbox" type="checkbox"/></div>
            <div class="col-xs-4 imageblock"><img src="./image/cart/s1.jpg" alt=""/></div>
            <div class="col-xs-7 textright">
                <span class="txt">2017夏季新款韩版蕾丝拼接</span><br/><p class="txt">荷叶袖露肩雪纺娃娃衫上衣女短袖雪</p>
                <p class="style small text-right">颜色:标配版</p><span></span>
                <div style="margin-top: 10px">
                    <span class="price">￥200元</span>
                    <div class="jj pull-right clearfix">
                        <span class="jian pull-left">-</span>
                        <input class="num pull-left" type="text" value="1"/>
                        <span class="jia pull-left">+</span><br/>
                        <span class="youhuo">有货</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="list">
        <div class="dianpu">
            <input class="ck" type="checkbox"/>
            <a href=""><span>卡饰社官方旗舰店</span></a>
        </div>
        <div class="shangpin row">
            <div class="col-xs-1"><input class="ckbox" type="checkbox"/></div>
            <div class="col-xs-4 imageblock"><img src="./image/cart/s1.jpg" alt=""/></div>
            <div class="col-xs-7 textright">
                <span class="txt">2017夏季新款韩版蕾丝拼接</span><br/><p class="txt">荷叶袖露肩雪纺娃娃衫上衣女短袖雪</p>
                <p class="style small text-right">颜色:标配版</p><span></span>
                <div style="margin-top: 10px">
                    <span class="price">￥150元</span>
                    <div class="jj pull-right clearfix">
                        <span class="jian pull-left">-</span>
                        <input class="num pull-left" type="text" value="1"/>
                        <span class="jia pull-left">+</span><br/>
                        <span class="youhuo">有货</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div style="width: 320px;height: 100px"></div>
    <div class="jiesuan">
        <input class="allcheck" type="checkbox"/>
        <span class="span1">全选</span>
        <span class="span2">合计：</span>
        <span class="span3">￥0</span>
        <span class="span4"><a href="#">结算</a></span>
    </div>
    <article class="main">
        <div class="text-center clearfix">
            <div class="pull-left footer"><a href="./index.html"><i class="glyphicon glyphicon-home"></i><p>首页</p></a></div>
            <div class="pull-left footer"><a href="./sort.html"><i class="glyphicon glyphicon-list"></i><p>分类</p></a></div>
            <div class="pull-left footer"><a href="./nearby.html"><i class="glyphicon glyphicon-globe"></i><p>附近</p></a></div>
            <div class="pull-left footer"><a href="#"><i class="glyphicon glyphicon-shopping-cart"></i><p>购物车</p></a></div>
            <div class="pull-left footer"><a href="./my.html"><i class="glyphicon glyphicon-user"></i><p>我的</p></a></div>
        </div>
    </article>
</div>
</body>
<script src="js/jquery-3.0.0.js"></script>
<script>
    $(function(){
        $(".num").each(function(index){
            $(this).keydown(function(e){
                if(!e.key.match(/[0-9]/)&& e.key!="Backspace")
                {
                    return false;
                }
            }).blur(function(){
                var number=$(this).val()
                showsmallprice(index,number);
                showtotalprice();
            })
        })
        $(".ck").each(function(){
            $(this).click(function(){
                if($(this).prop("checked")==true){
                    $(this).parent().siblings(".shangpin").find(".ckbox").prop("checked",true);
                }else{
                    $(this).parent().siblings(".shangpin").find(".ckbox").prop("checked",false);
                }
                showtotalprice();
            })
        })
        $(".ckbox").each(function(){
            $(this).click(function(){
                showtotalprice();
            })
        })
        $(".allcheck").click(function(){
            if($(this).prop("checked")==true){
                $(".ck").prop("checked",true);
                $(".ckbox").prop("checked",true);
            }else{
                $(".ck").prop("checked",false);
                $(".ckbox").prop("checked",false);
            }
            showtotalprice();
        })
        var dj=[80,101,200,150];
        $(".jian").each(function (index){
            $(this).click(function (){
                var number=$(this).siblings(".num").val();
                number--;
                $(this).siblings(".num").val(number<1?1:number);
                showsmallprice(index,number);
                showtotalprice();
            });
        });
        $(".jia").each(function (index){
            $(this).click(function (){
                var number=$(this).siblings(".num").val();
                number++;
                $(this).siblings(".num").val(number);
                showsmallprice(index,number);
                showtotalprice();
            });
        });
        function showsmallprice(index,number){
            var price=dj[index];
            var smallprice=price*(number<1?1:number);
            $(".price").eq(index).html("￥"+smallprice+"元");
        }
        function showtotalprice(){
            var total=0;
            $(".ckbox").each(function(){
                if($(this).prop("checked")==true){
                    var len=$(this).parents(".shangpin").find(".price").html().toString().length;
                    total+=parseFloat($(this).parents(".shangpin").find(".price").html().toString().slice(1,len-1));
                }
            })
            $(".span3").html("￥"+total);

        }
    })
</script>
</html>